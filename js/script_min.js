window.addEventListener("load",function(){var
  isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName")}catch(err){isStorageSupport=!1};var feedbackBtn=document.querySelector(".contacts_feedback-btn"),mapPreview=document.querySelector(".contacts_map-link"),goodsBuy=document.querySelectorAll(".goods_item_popup a");if(feedbackBtn){var
  feedbackPopup=document.querySelector(".feedback_popup"),feedbackForm=feedbackPopup.querySelector("form"),feedbackSend=feedbackForm.querySelector(".feedback_send"),userName=feedbackForm.querySelector("#user_name"),userEMail=feedbackForm.querySelector("#user_email"),userMessage=feedbackForm.querySelector("#user_message"),feedbackClose=feedbackPopup.querySelector(".popup_close");feedbackBtn.addEventListener("click",function(evt){evt.preventDefault();feedbackPopup.classList.add("popup-show");if(storage){userName.value=storage;userEMail.focus()}else userName.focus()});feedbackForm.addEventListener("submit",function(evt){if(!userName.value||!userMessage.value){evt.preventDefault();feedbackPopup.classList.remove("popup-error");feedbackPopup.offsetWidth=feedbackPopup.offsetWidth;feedbackPopup.classList.add("popup-error");if(!userName.value){userName.classList.add("form-error")}else{userName.classList.remove("form-error")}
  if(!userMessage.value){userMessage.classList.add("form-error")}else{userMessage.classList.remove("form-error")}}else{if(isStorageSupport){localStorage.setItem("userName",userName.value)}}});feedbackClose.addEventListener("click",function(evt){evt.preventDefault();feedbackPopup.classList.remove("popup-show");feedbackPopup.classList.remove("popup-error");userName.classList.remove("form-error");userMessage.classList.remove("form-error")});window.addEventListener("keydown",function(evt){if(evt.keyCode===27){evt.preventDefault();if(feedbackPopup.classList.contains("popup-show")){feedbackPopup.classList.remove("popup-show");feedbackPopup.classList.remove("popup-error");userName.classList.remove("form-error");userMessage.classList.remove("form-error")}}})}
  if(mapPreview){var
  mapPopup=document.querySelector(".map_popup"),mapStatic=document.querySelector(".map_popup-static"),mapClose=mapPopup.querySelector(".popup_close");mapPreview.addEventListener("click",function(evt){evt.preventDefault();mapPopup.classList.add("popup-show")});mapClose.addEventListener("click",function(evt){evt.preventDefault();mapPopup.classList.remove("popup-show")});window.addEventListener("keydown",function(evt){if(evt.keyCode===27){evt.preventDefault();if(mapPopup.classList.contains("popup-show")){mapPopup.classList.remove("popup-show")}}})}
  if(goodsBuy){var
  purchasePopup=document.querySelector(".purchase_popup"),purchaseNext=document.querySelector(".purchase_next"),purchaseClose=purchasePopup.querySelector(".popup_close");for(var i=0;i<goodsBuy.length;i++){goodsBuy[i].addEventListener("click",function(evt){evt.preventDefault();purchasePopup.classList.add("popup-show")})};purchaseClose.addEventListener("click",function(evt){evt.preventDefault();purchasePopup.classList.remove("popup-show")});window.addEventListener("keydown",function(evt){if(evt.keyCode===27){evt.preventDefault();if(purchasePopup.classList.contains("popup-show")){purchasePopup.classList.remove("popup-show")}}});purchaseNext.addEventListener("click",function(evt){evt.preventDefault();purchasePopup.classList.remove("popup-show")})}})